---
import Layout from "../../layouts/Layout.astro";
import { collectLabels } from "../../utils/helpers";

const posts = await Astro.glob("../../content/posts/*.md");
const labels = collectLabels(posts);
---

<Layout>
  <section>
    {
      posts.map(({ frontmatter }) => (
        <a href={`/blog/${frontmatter.slug}`}>
          <h3>{frontmatter.title}</h3>
          <div>
            Written by <strong>{frontmatter.author} </strong> on{" "}
            {new Date(frontmatter.date).toLocaleDateString()}
          </div>
          <small>{frontmatter.label}</small>
        </a>
      ))
    }
  </section>
</Layout>

<script define:vars={{ labels }}>
console.log(labels);
</script>
