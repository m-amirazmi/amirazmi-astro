---
import Card from "../../components/Card.astro";
import Container from "../../components/Container.astro";
import Text from "../../components/Text.astro";
import Layout from "../../layouts/Layout.astro";
import { collectLabels } from "../../utils/helpers";
import '../../styles/pages/blog-page.scss';

const posts = await Astro.glob("../../content/posts/*.md");
---

<Layout>
  <Container size="xl" inlinePadding="sm">
    <div class="blog">
      <Text tag="h1" weight="bold">My Blog Posts</Text>
      <div class="blog-posts">
        {
          posts.map(({ frontmatter }) => (
            <Text tag="a" class="blog-posts-item" size="sm" href={`/blog/${frontmatter.slug}`}>
              <Card 
                title={frontmatter.title} 
                subtitle={`Posted on ${new Date(frontmatter.date).toLocaleDateString()}`}
                summary={`${frontmatter.excerpt.substring(0,170)} ...`}
                tags={frontmatter.label.split(", ")}
              >
              </Card>
            </Text>
          ))
        }
      </div>
    </div>
  </Container>
</Layout>

